/*C3*/SET SCHEMA PUBLIC
\u000a    drop table if exists Car CASCADE 
\u000a    drop table if exists Movie CASCADE 
\u000a    drop table if exists Person_Movie CASCADE 
\u000a    drop table if exists TPerson CASCADE 
\u000a    drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
\u000a    create table Car (\u000a       immatriculation varchar(255) not null,\u000a        model varchar(150) not null,\u000a        owner bigint,\u000a        primary key (immatriculation)\u000a    )
\u000a    create table Movie (\u000a       id bigint not null,\u000a        name varchar(150) not null,\u000a        primary key (id)\u000a    )
\u000a    create table Person_Movie (\u000a       id_person bigint not null,\u000a        id_movie bigint not null,\u000a        primary key (id_person, id_movie)\u000a    )
\u000a    create table TPerson (\u000a       id bigint not null,\u000a        city varchar(255),\u000a        country varchar(255),\u000a        street varchar(255),\u000a        birth_day date,\u000a        first_name varchar(200) not null,\u000a        version bigint not null,\u000a        primary key (id)\u000a    )
\u000a    alter table TPerson \u000a       add constraint UK58gbcq3p83fgxehg706edmoun unique (first_name, birth_day)
\u000a    alter table Car \u000a       add constraint FKcs6wfkcq05mmf4f9gciu64ab9 \u000a       foreign key (owner) \u000a       references TPerson
\u000a    alter table Person_Movie \u000a       add constraint FK7466dlyofm4apb9n3qfuqmv1o \u000a       foreign key (id_movie) \u000a       references Movie
\u000a    alter table Person_Movie \u000a       add constraint FKph2gv8lpnj27l3c86kxh5q7g8 \u000a       foreign key (id_person) \u000a       references TPerson
INSERT INTO TPERSON VALUES(1,'NYC','USA','Sesame Street','2019-03-18','John',0)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
COMMIT
INSERT INTO TPERSON VALUES(2,'London','UK','Oxford Street','2019-03-18','Jane',0)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 3
COMMIT
INSERT INTO TPERSON VALUES(3,NULL,NULL,NULL,NULL,'Harry',0)
INSERT INTO MOVIE VALUES(4,'LoTR')
INSERT INTO MOVIE VALUES(5,'Harry Potter')
INSERT INTO PERSON_MOVIE VALUES(3,4)
INSERT INTO PERSON_MOVIE VALUES(3,5)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 6
COMMIT
DELETE FROM PERSON_MOVIE WHERE ID_PERSON=3 AND ID_MOVIE=4
DELETE FROM PERSON_MOVIE WHERE ID_PERSON=3 AND ID_MOVIE=5
DELETE FROM MOVIE WHERE ID=4
DELETE FROM MOVIE WHERE ID=5
DELETE FROM TPERSON WHERE ID=3
COMMIT
DELETE FROM TPERSON WHERE ID=1
INSERT INTO TPERSON VALUES(1,'NYC','USA','Sesame Street','2019-03-18','Joan',1)
COMMIT
INSERT INTO TPERSON VALUES(6,NULL,NULL,NULL,'2019-03-18','Ryan',0)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 7
COMMIT
DELETE FROM TPERSON WHERE ID=6
COMMIT
INSERT INTO TPERSON VALUES(7,NULL,NULL,NULL,'2019-03-18','Antony',0)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 8
COMMIT
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 9
INSERT INTO TPERSON VALUES(9,NULL,NULL,NULL,'2019-03-18','Jay',0)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 10
COMMIT
INSERT INTO TPERSON VALUES(10,NULL,NULL,NULL,'2019-03-18','Adam',0)
INSERT INTO CAR VALUES('AZERTY','307',10)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 11
COMMIT
INSERT INTO CAR VALUES('UIOPQS','Cooper',2)
DELETE FROM TPERSON WHERE ID=2
INSERT INTO TPERSON VALUES(2,'London','UK','Oxford Street','2019-03-18','Jane',1)
COMMIT
\u000a    drop table if exists Car CASCADE 
\u000a    drop table if exists Movie CASCADE 
\u000a    drop table if exists Person_Movie CASCADE 
\u000a    drop table if exists TPerson CASCADE 
\u000a    drop sequence hibernate_sequence if exists
DISCONNECT
